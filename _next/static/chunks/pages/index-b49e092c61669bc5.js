(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(7638)}])},7638:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var s,a=t(2322),r=t(7729),i=t.n(r),l=t(2784),o=t(7126),c=t(9080),d=t(1490),u=t(4423),g=JSON.parse('{"version":"v1.7.1","name":"ShinyToken","bytecode":"0001180102020200071600b11601ab160013c3038d7ea4c68000a8","codeHash":"eb751581aa1fc6da7377f792446d49817a6627c1c41b30d1f83cb6ebb57492fa","fieldsSig":{"names":[],"types":[],"isMutable":[]},"eventsSig":[],"functions":[{"name":"transfer","usePreapprovedAssets":false,"useAssetsInContract":true,"isPublic":true,"paramNames":["to","amount"],"paramTypes":["Address","U256"],"paramIsMutable":[false,false],"returnTypes":[]}]}');class m extends u.ContractFactory{at(e){return new j(e)}async testTransferMethod(e){return(0,u.testMethod)(this,"transfer",e)}}let h=new m(u.Contract.fromJson(g,"","eb751581aa1fc6da7377f792446d49817a6627c1c41b30d1f83cb6ebb57492fa"));class j extends u.ContractInstance{async fetchState(){return(0,u.fetchContractState)(h,this)}constructor(e){super(e)}}var I=JSON.parse('{"version":"v1.7.1","name":"Transfer","bytecodeTemplate":"01010300000006{1}{2}0e0c{0}0100","fieldsSig":{"names":["shinyTokenId","to","amount"],"types":["ByteVec","Address","U256"],"isMutable":[false,false,false]},"functions":[{"name":"main","usePreapprovedAssets":true,"useAssetsInContract":false,"isPublic":true,"paramNames":[],"paramTypes":[],"paramIsMutable":[],"returnTypes":[]}]}');!function(e){async function n(e,n){let s=await t.txParamsForExecution(e,n);return await e.signAndSubmitExecuteScriptTx(s)}e.execute=n;var t=e.script=u.Script.fromJson(I)}(s||(s={}));let x=async e=>{let n=(0,d.Ul)();if(!(null==n?void 0:n.explorerProvider))return console.log("Alephium explorer provider not initialized"),[];let t=[],s=await n.explorerProvider.addresses.getAddressesAddressTokens(e);for(let a of s){let r=t.find(e=>e.id===a),i=await n.explorerProvider.addresses.getAddressesAddressTokensTokenIdBalance(e,a);r?(r.balance.balance+=BigInt(i.balance),r.balance.lockedBalance+=BigInt(i.lockedBalance)):t.push({id:a,balance:{balance:BigInt(i.balance),lockedBalance:BigInt(i.lockedBalance)}})}return t},N=async e=>{let n=(0,d.Ul)();if(!(null==n?void 0:n.explorerProvider)){console.log("Alephium explorer provider not initialized");return}let t=await n.explorerProvider.addresses.getAddressesAddressBalance(e);return t},p=async(e,n)=>{let t=(0,d.Ul)();if(!(null==t?void 0:t.connectedAccount)||!(null==t?void 0:t.connectedNetworkId))throw Error("alephium object not initialized");return h.deploy(t,{initialFields:{},initialAttoAlphAmount:BigInt(11e17),issueTokenAmount:BigInt(e)})},v=async(e,n)=>{let t=(0,d.Ul)();if(!(null==t?void 0:t.connectedAccount)||!(null==t?void 0:t.connectedNetworkId))throw Error("alephium object not initialized");return s.execute(t,{initialFields:{shinyTokenId:(0,u.binToHex)((0,u.contractIdFromAddress)(n)),to:t.connectedAccount.address,amount:BigInt(e)}})},A=async(e,n,t,s)=>{let a=(0,d.Ul)();if(!(null==a?void 0:a.connectedAccount)||!(null==a?void 0:a.connectedNetworkId))throw Error("alephium object not initialized");return await a.signAndSubmitTransferTx({signerAddress:a.connectedAccount.address,destinations:[{address:n,attoAlphAmount:u.DUST_AMOUNT,tokens:[{id:e,amount:BigInt(t)}]}]})},M=async e=>{let n=(0,d.Ul)();if(void 0!==n)return null==n?void 0:n.enableIfConnected({onDisconnected:e,networkId:"devnet",chainGroup:0}).catch(e=>{console.error(e)})},b=async e=>{let n=(0,d.Ul)();if(void 0!==n)return null==n?void 0:n.enable({onDisconnected:e,networkId:"devnet",chainGroup:0}).catch(e=>{throw void console.error(e)})},y=()=>{let e=(0,d.Ul)();return null==e?void 0:e.disconnect()},f=()=>{var e;return null===(e=(0,d.Ul)())||void 0===e?void 0:e.connectedNetworkId},w=()=>{let e=f();return"mainnet-alpha"===e?"https://voyager.online":"goerli-alpha"===e?"https://goerli.voyager.online":void 0},T=async(e,n)=>{let t=(0,d.Ul)();if(!(null==t?void 0:t.connectedAccount)||!(null==t?void 0:t.connectedNetworkId))throw Error("Alephium object not initialized");return await t.signMessage({signerAddress:t.connectedAccount.address,message:e,messageHasher:n})};var C=t(4923),D=t.n(C);let S=e=>{let{address:n}=e,[t,s]=(0,l.useState)("10"),[r,i]=(0,l.useState)(""),[g,m]=(0,l.useState)(""),[h,j]=(0,l.useState)(""),[I,M]=(0,l.useState)("alephium"),[b,y]=(0,l.useState)(),[C,S]=(0,l.useState)(""),[k,L]=(0,l.useState)("idle"),[O,z]=(0,l.useState)(""),[P,_]=(0,l.useState)(""),[B,U]=(0,l.useState)([]),[Z,E]=(0,l.useState)(),[H,Y]=(0,l.useState)(),[G,Q]=(0,l.useState)(!1),[F,W]=(0,l.useState)(),J=(0,d.Ul)(),K=["approve","pending"].includes(k),R=()=>{Y(void 0),s("10"),Q(!1)};(0,l.useEffect)(()=>{x(n).then(e=>{e.length>0&&W({value:e[0],label:e[0].id}),U(e)}),N(n).then(e=>{E(e)})},[n]),(0,l.useEffect)(()=>{(async()=>{if(C&&"pending"===k){if(z(""),null==J?void 0:J.nodeProvider){let e;let n=0;u.web3.setCurrentNodeProvider(J.nodeProvider),e=(0,u.subscribeToTxStatus)({pollingInterval:3e3,messageCallback:async t=>{switch(t.type){case"Confirmed":console.log("Transaction ".concat(C," is confirmed")),L("success"),G&&(console.log("reset mint token"),R()),null==e||e.unsubscribe();break;case"TxNotFound":console.log("Transaction ".concat(C," is not found")),n>3?(L("failure"),z("Transaction ".concat(C," not found")),null==e||e.unsubscribe()):await new Promise(e=>setTimeout(e,3e3)),n+=1;break;case"MemPooled":console.log("Transaction ".concat(C," is in mempool")),L("pending")}},errorCallback:(e,n)=>{console.log(e),L("failure");let t=e?"".concat(e):"No further details";return(null==e?void 0:e.response)&&(t=JSON.stringify(e.response,null,2)),z(t),n.unsubscribe(),Promise.resolve()}},C)}else throw Error("Alephium object is not initialized")}})()},[k,C,null==J?void 0:J.nodeProvider,G]);let V=f(),X=async e=>{e.preventDefault();try{L("approve"),console.log("mint",t);let n=await p(t,V);console.log(n),Y(n.contractAddress),S(n.txId),L("pending")}catch(s){console.error(s),L("idle")}},q=async e=>{try{e.preventDefault(),L("approve"),console.log("transfer",{transferTo:r,transferAmount:g});let n=await A(P,r,g,V);console.log(n),S(n.txId),L("pending")}catch(t){console.error(t),L("idle")}},$=async e=>{try{if(e.preventDefault(),H){L("approve"),console.log("transfer",{transferTo:r,transferAmount:g,mintedToken:H});let n=await v(t,H);S(n.txId),L("pending"),Q(!0)}else throw Error("No minted token")}catch(s){console.error(s),L("idle")}},ee=async e=>{try{e.preventDefault(),L("approve"),console.log("sign",h,I);let n=await T(h,I);console.log(n),y(n.signature),L("success")}catch(t){console.error(t),L("idle")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("h3",{style:{margin:0},children:["Transaction status: ",(0,a.jsx)("code",{children:k})]}),C&&(0,a.jsxs)("h3",{style:{margin:0},children:["Transaction hash:"," ",(0,a.jsx)("a",{href:"".concat(w(),"/tx/").concat(C),target:"_blank",rel:"noreferrer",style:{color:"blue",margin:"0 0 1em"},children:(0,a.jsx)("code",{children:C})})]}),O&&(0,a.jsxs)("h3",{style:{margin:0},children:["Transaction error:"," ",(0,a.jsx)("textarea",{style:{width:"100%",height:100,background:"white"},value:O,readOnly:!0})]}),(0,a.jsxs)("h3",{style:{margin:0},children:["ALPH Balance: ",(0,a.jsxs)("code",{children:[(null==Z?void 0:Z.balance)&&(0,o.convertSetToAlph)(BigInt(Z.balance))," ALPH"]})]}),(0,a.jsx)("h3",{style:{margin:0},children:B.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("label",{children:["Token Balances (",B.length," tokens in total)"]}),(0,a.jsxs)("div",{className:"columns",children:[(0,a.jsx)(c.ZP,{value:F,onChange:e=>{e&&W(e)},options:B.map(e=>({value:e,label:e.id}))}),(0,a.jsx)("code",{children:null==F?void 0:F.value.balance.balance.toString()})]})]}):(0,a.jsx)("div",{children:"No tokens"})}),(0,a.jsxs)("div",{className:"columns",children:[H&&(null==J?void 0:J.connectedAccount)?(0,a.jsxs)("form",{onSubmit:$,children:[(0,a.jsx)("h2",{className:D().title,children:"Withdraw all minted token"}),(0,a.jsx)("label",{htmlFor:"token-address",children:"Token Address"}),(0,a.jsx)("p",{children:H}),(0,a.jsx)("label",{htmlFor:"transfer-to",children:"To"}),(0,a.jsx)("input",{type:"text",id:"transfer-to",name:"fname",disabled:!0,value:J.connectedAccount.address,onChange:e=>i(e.target.value)}),(0,a.jsx)("label",{htmlFor:"transfer-amount",children:"Amount"}),(0,a.jsx)("input",{type:"number",id:"transfer-amount",name:"fname",disabled:!0,value:t,onChange:e=>m(e.target.value)}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{type:"submit",disabled:K,value:"Withdraw"})]}):(0,a.jsxs)("form",{onSubmit:X,children:[(0,a.jsx)("h2",{className:D().title,children:"Mint token"}),(0,a.jsx)("label",{htmlFor:"mint-amount",children:"Amount"}),(0,a.jsx)("input",{type:"number",id:"mint-amount",name:"fname",value:t,onChange:e=>s(e.target.value)}),(0,a.jsx)("input",{type:"submit"})]}),(0,a.jsxs)("form",{onSubmit:q,children:[(0,a.jsx)("h2",{className:D().title,children:"Transfer token"}),(0,a.jsx)("label",{htmlFor:"transfer-token-address",children:"Token Id"}),(0,a.jsx)("input",{type:"text",id:"transfer-to",name:"fname",value:P,onChange:e=>_(e.target.value)}),(0,a.jsx)("label",{htmlFor:"transfer-to",children:"To"}),(0,a.jsx)("input",{type:"text",id:"transfer-to",name:"fname",value:r,onChange:e=>i(e.target.value)}),(0,a.jsx)("label",{htmlFor:"transfer-amount",children:"Amount"}),(0,a.jsx)("input",{type:"number",id:"transfer-amount",name:"fname",value:g,onChange:e=>m(e.target.value)}),(0,a.jsx)("br",{}),(0,a.jsx)("input",{type:"submit",disabled:K,value:"Transfer"})]})]}),(0,a.jsxs)("div",{className:"columns",children:[(0,a.jsxs)("form",{onSubmit:ee,children:[(0,a.jsx)("h2",{className:D().title,children:"Sign Message"}),(0,a.jsxs)("div",{className:"columns",children:[(0,a.jsx)("label",{htmlFor:"short-text",children:"Short Text"}),(0,a.jsx)("input",{type:"text",id:"short-text",name:"short-text",value:h,onChange:e=>j(e.target.value)})]}),(0,a.jsxs)("div",{className:"columns",children:[(0,a.jsx)("label",{htmlFor:"short-text",children:"Hasher"}),(0,a.jsxs)("select",{name:"hasher",id:"hasher",onChange:e=>M(e.target.value),children:[(0,a.jsx)("option",{value:"alephium",children:"Alephium"}),(0,a.jsx)("option",{value:"sha256",children:"Sha256"}),(0,a.jsx)("option",{value:"blake2b",children:"blake2b"})]})]}),(0,a.jsx)("input",{type:"submit",value:"Sign"})]}),(0,a.jsxs)("form",{children:[(0,a.jsx)("h2",{className:D().title,children:"Sign results"}),(0,a.jsx)("label",{htmlFor:"r",children:"Signature"}),(0,a.jsx)("textarea",{className:D().textarea,id:"signature",name:"signature",value:b,readOnly:!0})]})]})]})},k=()=>{let[e,n]=(0,l.useState)(),[t,s]=(0,l.useState)(void 0),[r,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=async()=>{let e=await M(()=>Promise.resolve(o(!1)));n(null==e?void 0:e.address),s("devnet"),o(!!e)};(async()=>{await e()})()},[]);let c=async()=>{let e=await b(()=>Promise.resolve(o(!1)));n(null==e?void 0:e.address),s("devnet"),o(!!e)},d=async()=>{await y(),n(void 0),s(void 0),o(!1)};return(0,a.jsxs)("div",{className:D().container,children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Alephium Test dApp"}),(0,a.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,a.jsx)("main",{className:D().main,children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:D().connect,onClick:d,children:"Disconnect"}),(0,a.jsxs)("h3",{style:{margin:0},children:["Wallet address: ",(0,a.jsx)("code",{children:e})]}),(0,a.jsxs)("h3",{style:{margin:0},children:["Network: ",(0,a.jsx)("code",{children:t})]}),e&&(0,a.jsx)(S,{address:e})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{className:D().connect,onClick:c,children:"Connect Wallet"}),(0,a.jsx)("p",{children:"First connect wallet to use dapp."})]})})]})};var L=k},4923:function(e){e.exports={container:"Home_container__Ennsq",main:"Home_main__EtNt2",connect:"Home_connect__28DRU",title:"Home_title__FX7xZ",description:"Home_description__Qwq1f",code:"Home_code__aGV0U",grid:"Home_grid__c_g6N",card:"Home_card__7oz7W",logo:"Home_logo__80mSr",textarea:"Home_textarea__3BgG_"}},7352:function(){},7695:function(){},3196:function(){},8087:function(){},1490:function(e,n,t){"use strict";t(4423).InteractiveSignerProvider;let s={id:"alephium",name:"Alephium",icon:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjEwMCUiCiAgIGhlaWdodD0iMTAwJSIKICAgdmlld0JveD0iMCAwIDUxMiA1MTIiCiAgIHZlcnNpb249IjEuMSIKICAgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIKICAgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoyOyIKICAgaWQ9InN2Zzk4ODQiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnMKICAgaWQ9ImRlZnMxMCIgLz4KICAgIDxnCiAgIGlkPSJnMTAwNyI+PHJlY3QKICAgICB4PSIwIgogICAgIHk9IjAiCiAgICAgd2lkdGg9IjUxMi4wMDA2MSIKICAgICBoZWlnaHQ9IjUxMS45OTk5MSIKICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZS13aWR0aDowLjM1NTU1NiIKICAgICBpZD0icmVjdDk4NjUiIC8+PHBhdGgKICAgICBkPSJtIDIyMi44MjMyLDMwOS43OTQxMSBjIDAsLTQuMzYxMjQgLTMuNDQ2NzgsLTcuMjk4MzIgLTcuNzA0NTgsLTYuNTQ3NjYgbCAtNTAuODkwNzksOC45NzIwOSBjIC00LjI1Nzc5LDAuNzUwNjUgLTcuNzA0NTgsNC45MDMwOCAtNy43MDQ1OCw5LjI2NDMxIHYgOTYuMjM1OTggYyAwLDQuMzcxMTkgMy40NDY3OSw3LjMwODI3IDcuNzA0NTgsNi41NTc2MSBsIDUwLjg5MDc5LC04Ljk3MjA5IGMgNC4yNTc4LC0wLjc1MDY1IDcuNzA0NTgsLTQuOTAzMDggNy43MDQ1OCwtOS4yNzQyNyB6IgogICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMDA0NyIKICAgICBpZD0icGF0aDk4NjciIC8+PHBhdGgKICAgICBkPSJtIDM1NS4zODYyLDk0LjMwNTMwNCBjIDAsLTQuMzYxMjM3IC0zLjQ0Njc4LC03LjI5ODMxNSAtNy43MDQ1OCwtNi41NDc2NjIgbCAtNTAuODkwNzksOC45NzIwOTUgYyAtNC4yNTc3OSwwLjc1MDY1MyAtNy43MDQ1OCw0LjkwMzA3MyAtNy43MDQ1OCw5LjI2NDMxMyB2IDk2LjIzNTk3IGMgMCw0LjM3MTIgMy40NDY3OSw3LjMwODI3IDcuNzA0NTgsNi41NTc2MiBsIDUwLjg5MDc5LC04Ljk3MjA5IGMgNC4yNTc4LC0wLjc1MDY2IDcuNzA0NTgsLTQuOTAzMDggNy43MDQ1OCwtOS4yNzQyNyB6IgogICAgIHN0eWxlPSJmaWxsOiNmZjVkNTE7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMDA0NyIKICAgICBpZD0icGF0aDk4NzEiIC8+PHBhdGgKICAgICBkPSJtIDIzMS4wODk3OSwxMTYuNzY3NDEgYyAtMS45NjU1NSwtNC4zMjkwNSAtNy4yNDkxNiwtNy4xODEyNiAtMTEuODExMDgsLTYuMzc2OTkgbCAtNTQuNTI1NzgsOS42MTI5NiBjIC00LjU2MTkyLDAuODA0MjcgLTYuNjY0MjgsNC45NTg2MyAtNC42OTg3Miw5LjI4NzY4IGwgMTIwLjczOTcxLDI2NS45MjQxMiBjIDEuOTY1NTYsNC4zMjkwNiA3LjI2MDUzLDcuMjA2MjggMTEuODIyNDQsNi40MDIwMSBsIDU0LjUyNTc5LC05LjYxMjk1IGMgNC41NjE5MiwtMC44MDQyNyA2LjY1MjkxLC00Ljk4MzY1IDQuNjg3MzYsLTkuMzEyNzEgeiIKICAgICBzdHlsZT0iZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjcxMzM0IgogICAgIGlkPSJwYXRoOTg3NSIgLz48L2c+Cjwvc3ZnPgo=",downloads:{chrome:"https://chrome.google.com/webstore/detail/alephium-extension-wallet",firefox:"https://addons.mozilla.org/en-US/firefox/addon/alephium-extension-wallet"}};n.Ul=function(){return function(e){let n=function(e){try{let n=window.alephiumProviders;if(!n)return;let t=n[e];return!function(e){try{return e&&["id","name","icon","unsafeEnable","isPreauthorized","nodeProvider","explorerProvider","signAndSubmitTransferTx","signAndSubmitDeployContractTx","signAndSubmitExecuteScriptTx","signAndSubmitUnsignedTx","signUnsignedTx","signMessage"].every(n=>n in e)}catch{}return!1}(t)?void 0:t}catch{}}(e.id);return n&&n.id===e.id&&n.name===e.name?n:void 0}(s)}}},function(e){e.O(0,[936,934,825,774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);